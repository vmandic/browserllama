---
description: This rule is applied when a LLM agent is asked to create a new task file in the project backlog
alwaysApply: false
---
# How to Create Task Files

## Location
All task files must be created under `tasks/` at the project root.

Use this exact task-type mapping:

| Task type | Directory | Filename prefix |
| --- | --- | --- |
| Bug | `tasks/bugs/` | `bugfix-` |
| Feature | `tasks/feats/` | `feat-` |
| Chore | `tasks/chores/` | `chore-` |
| LLM | `tasks/llm/` | `llm-` |
| Tech | `tasks/tech/` | `tech-` |

## Task Storage Format
Tasks can be stored in one of two formats:

1. Single Markdown file task.
2. Task directory package (for attachments, images, assets, notes).

If a task directory package is used:
- Directory name must follow the same naming convention as task files, but without `.md`.
- A required primary Markdown file must exist at `<task-dir>/README.md`.
- Optional supporting files may be added in subfolders (for example: `assets/`, `images/`, `attachments/`).

## Filename Convention
Task files must use these filename templates:
- `bugfix-00001_<title>.md`
- `feat-00001_<title>.md`
- `chore-00001_<title>.md`
- `llm-00001_<title>.md`
- `tech-00001_<title>.md`

Task directories must use these directory name templates:
- `bugfix-00001_<title>/`
- `feat-00001_<title>/`
- `chore-00001_<title>/`
- `llm-00001_<title>/`
- `tech-00001_<title>/`

Rules:
- Use only the mapped prefix for the selected task type.
- Use a 5-digit, zero-padded number (`00001`, `00002`, ...).
- Add a short title segment after the number.
- Title segment must be lowercase with words separated by underscores.
- Title segment must be at most 6 words.
- Keep the `.md` extension.
- Do not add suffixes, extra words, or dates in the filename.

Sequence rules:
- Numbering is scoped by prefix within its task directory.
- New task uses the next available number for that prefix.
- Do not reuse or renumber existing task files.
- File and directory task formats share the same sequence space.

## File Content Template
All task files are Markdown files and must include these sections:

- `# Title`
- `# What`
- `# Why`
- `# How`
- `# Definition of Done`

Bug task exception:
- Bug task files must include `# How to reproduce`.
- For bug tasks, include `# How to reproduce` before `# How`.
- Heading names must match exactly (same spelling and capitalization).
- The `# Title` value must match the filename title segment in human-readable form.

## Standard Template (feat/chore/llm/tech)
```markdown
# Title
Initial UI and UX improvements

# What

# Why

# How

# Definition of Done
```

## Bug Template
```markdown
# Title
Fix popup status indicator encoding

# What

# Why

# How to reproduce

# How

# Definition of Done
```

## Creation Workflow
1. Determine the task type (bug, feature, chore, llm, tech).
2. Map the type to directory and prefix using the table above.
3. Choose storage format: single Markdown file or task directory package.
4. Find existing files and directories with that prefix in that directory.
5. Pick the next available 5-digit number.
6. Define a concise title of up to 6 words.
7. Convert the title to lowercase underscore format for filename suffix.
8. Create either:
   - `<prefix><number>_<title>.md`, or
   - `<prefix><number>_<title>/README.md` (required for directory tasks).
9. Fill required headings using the correct template.
10. If type is bug, include `# How to reproduce` before `# How`.

## Writing Guidelines
- Keep content concise and actionable.
- `# Title`: short human-readable task title matching the filename suffix.
- `# What`: state the change clearly.
- `# Why`: explain expected value or problem solved.
- `# How`: list implementation steps in execution order.
- `# Definition of Done`: include measurable, verifiable outcomes.
- For bugs, `# How to reproduce` should include deterministic repro steps.

## Validation Checklist
- File is in the correct `tasks/<type>/` directory.
- Task is either:
  - file: `<prefix>-NNNNN_<title>.md`, or
  - directory: `<prefix>-NNNNN_<title>/README.md` exists.
- Filename title suffix uses lowercase words separated by underscores and is at most 6 words.
- Number is the next available for that prefix.
- `# Title` heading exists and matches the filename title in readable form.
- Required headings exist exactly as defined.
- Bug tasks include `# How to reproduce` before `# How`.
